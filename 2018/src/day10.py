# Day 10: The Stars Align
import time


class Particle:
    def __init__(self, x, y, vx, vy):
        self.x = x
        self.y = y
        self.vx = vx
        self.vy = vy

    def tick(self):
        self.x += self.vx
        self.y += self.vy

    def __eq__(self, other):
        return self.x == other.x and self.y == other.y


POINTS = [
    Particle(-10810, 43870, 1, -4),
    Particle(-21745, -10795, 2, 1),
    Particle(54771, -54515, -5, 5),
    Particle(54792, -32660, -5, 3),
    Particle(21972, 54799, -2, -5),
    Particle(-43565, -43583, 4, 4),
    Particle(54775, 43864, -5, -4),
    Particle(54819, -54516, -5, 5),
    Particle(21981, 32941, -2, -3),
    Particle(-32642, 43871, 3, -4),
    Particle(-43614, -54516, 4, 5),
    Particle(-21758, -43590, 2, 4),
    Particle(-43589, -54520, 4, 5),
    Particle(-10818, 43864, 1, -4),
    Particle(-32646, -43584, 3, 4),
    Particle(54814, -54523, -5, 5),
    Particle(43877, -43592, -4, 4),
    Particle(54766, 32933, -5, -3),
    Particle(-21749, 22006, 2, -2),
    Particle(-32658, -43588, 3, 4),
    Particle(-54544, -54524, 5, 5),
    Particle(-43590, -21725, 4, 2),
    Particle(-32638, 11076, 3, -1),
    Particle(43861, 32941, -4, -3),
    Particle(-21699, -32656, 2, 3),
    Particle(11089, 11068, -1, -1),
    Particle(-10805, 22000, 1, -2),
    Particle(-43598, 54797, 4, -5),
    Particle(11065, -21728, -1, 2),
    Particle(54768, 54799, -5, -5),
    Particle(-10810, 43871, 1, -4),
    Particle(54803, 22001, -5, -2),
    Particle(11081, -32651, -1, 3),
    Particle(-10782, -10792, 1, 1),
    Particle(-10824, -21722, 1, 2),
    Particle(-54529, -21728, 5, 2),
    Particle(32918, -10796, -3, 1),
    Particle(-10773, 32938, 1, -3),
    Particle(-21706, -21723, 2, 2),
    Particle(-32664, 43864, 3, -4),
    Particle(-43578, 54802, 4, -5),
    Particle(11082, 22007, -1, -2),
    Particle(43838, -10795, -4, 1),
    Particle(54766, 43871, -5, -4),
    Particle(22007, -54522, -2, 5),
    Particle(-43601, -21726, 4, 2),
    Particle(-10825, -10791, 1, 1),
    Particle(32950, -43584, -3, 4),
    Particle(-32669, 32939, 3, -3),
    Particle(-43564, -54524, 4, 5),
    Particle(22014, 32934, -2, -3),
    Particle(-10797, -43584, 1, 4),
    Particle(-10826, -32655, 1, 3),
    Particle(-32690, -10791, 3, 1),
    Particle(11059, -43588, -1, 4),
    Particle(-43598, 43869, 4, -4),
    Particle(32931, 43871, -3, -4),
    Particle(32927, 32941, -3, -3),
    Particle(-10798, 11068, 1, -1),
    Particle(32938, -54524, -3, 5),
    Particle(-32686, -32659, 3, 3),
    Particle(-43601, -54522, 4, 5),
    Particle(-32633, 11074, 3, -1),
    Particle(54766, 11068, -5, -1),
    Particle(11054, -10794, -1, 1),
    Particle(-10805, -10791, 1, 1),
    Particle(-54533, 43872, 5, -4),
    Particle(-43590, 11076, 4, -1),
    Particle(32954, -54524, -3, 5),
    Particle(43877, -54524, -4, 5),
    Particle(21982, -43589, -2, 4),
    Particle(-10824, -54518, 1, 5),
    Particle(-32666, -54521, 3, 5),
    Particle(-10789, -54523, 1, 5),
    Particle(32936, -10796, -3, 1),
    Particle(43850, 22008, -4, -2),
    Particle(43870, -21722, -4, 2),
    Particle(11059, -10792, -1, 1),
    Particle(43875, -32651, -4, 3),
    Particle(54769, -32653, -5, 3),
    Particle(-32633, -43586, 3, 4),
    Particle(11046, 22007, -1, -2),
    Particle(-10794, -54515, 1, 5),
    Particle(-43598, -21725, 4, 2),
    Particle(11083, -32660, -1, 3),
    Particle(-54504, -21728, 5, 2),
    Particle(43842, -32651, -4, 3),
    Particle(-54533, -10794, 5, 1),
    Particle(-43566, 22008, 4, -2),
    Particle(54817, 43873, -5, -4),
    Particle(-21742, -21725, 2, 2),
    Particle(43836, -10793, -4, 1),
    Particle(-32634, -21719, 3, 2),
    Particle(32918, 54800, -3, -5),
    Particle(32923, 22000, -3, -2),
    Particle(54774, -32651, -5, 3),
    Particle(11091, -32651, -1, 3),
    Particle(32902, -32654, -3, 3),
    Particle(-21714, -54521, 2, 5),
    Particle(-21755, -21726, 2, 2),
    Particle(-21707, 22009, 2, -2),
    Particle(11099, -54522, -1, 5),
    Particle(54766, 11071, -5, -1),
    Particle(54803, -54521, -5, 5),
    Particle(11086, -54523, -1, 5),
    Particle(-32641, 11068, 3, -1),
    Particle(-10816, -54519, 1, 5),
    Particle(21991, -54516, -2, 5),
    Particle(-10810, 22009, 1, -2),
    Particle(-21729, 32933, 2, -3),
    Particle(-21734, -10793, 2, 1),
    Particle(-32674, -10790, 3, 1),
    Particle(21970, -21722, -2, 2),
    Particle(54802, -10792, -5, 1),
    Particle(-43564, 43864, 4, -4),
    Particle(43878, -21720, -4, 2),
    Particle(32912, 54801, -3, -5),
    Particle(-32674, -10788, 3, 1),
    Particle(-43611, -32656, 4, 3),
    Particle(-43572, 43873, 4, -4),
    Particle(-21726, 32932, 2, -3),
    Particle(32926, -43590, -3, 4),
    Particle(54814, -10789, -5, 1),
    Particle(43834, 54796, -4, -5),
    Particle(-43578, -32652, 4, 3),
    Particle(-43590, -54523, 4, 5),
    Particle(-21721, 22009, 2, -2),
    Particle(11043, 22000, -1, -2),
    Particle(-32678, 54796, 3, -5),
    Particle(-54496, 22005, 5, -2),
    Particle(-32669, -54516, 3, 5),
    Particle(-54525, 32933, 5, -3),
    Particle(22023, -32659, -2, 3),
    Particle(43866, 43869, -4, -4),
    Particle(22031, -54523, -2, 5),
    Particle(11067, 22006, -1, -2),
    Particle(-43606, 43865, 4, -4),
    Particle(-21737, 11075, 2, -1),
    Particle(-54510, -43590, 5, 4),
    Particle(32918, 54801, -3, -5),
    Particle(-10823, -10789, 1, 1),
    Particle(22027, 54805, -2, -5),
    Particle(-21721, -43589, 2, 4),
    Particle(11054, 11069, -1, -1),
    Particle(-32656, -32656, 3, 3),
    Particle(54766, 11077, -5, -1),
    Particle(22029, -32660, -2, 3),
    Particle(32942, -10789, -3, 1),
    Particle(-43570, -32655, 4, 3),
    Particle(32926, 43871, -3, -4),
    Particle(-43590, -21722, 4, 2),
    Particle(32926, -54522, -3, 5),
    Particle(-21714, -43587, 2, 4),
    Particle(-21710, -54520, 2, 5),
    Particle(32952, 43864, -3, -4),
    Particle(-54536, 22004, 5, -2),
    Particle(32913, 11068, -3, -1),
    Particle(11098, 22009, -1, -2),
    Particle(-10817, 11068, 1, -1),
    Particle(-54493, 43866, 5, -4),
    Particle(43876, -32651, -4, 3),
    Particle(-43589, 32932, 4, -3),
    Particle(32955, -32652, -3, 3),
    Particle(21999, -10787, -2, 1),
    Particle(21982, 32941, -2, -3),
    Particle(43883, -54524, -4, 5),
    Particle(-54533, -32651, 5, 3),
    Particle(32953, 43869, -3, -4),
    Particle(-21750, 54804, 2, -5),
    Particle(-54554, -54520, 5, 5),
    Particle(-21723, 22000, 2, -2),
    Particle(32918, -10789, -3, 1),
    Particle(-10801, -21728, 1, 2),
    Particle(-43561, 54805, 4, -5),
    Particle(-10802, 22004, 1, -2),
    Particle(22002, 32938, -2, -3),
    Particle(11097, -32651, -1, 3),
    Particle(-21724, 22000, 2, -2),
    Particle(-54543, -43592, 5, 4),
    Particle(54775, 54796, -5, -5),
    Particle(11066, 54796, -1, -5),
    Particle(54814, 54798, -5, -5),
    Particle(32927, -43592, -3, 4),
    Particle(54803, 43872, -5, -4),
    Particle(-43569, -54516, 4, 5),
    Particle(-54498, 54796, 5, -5),
    Particle(54786, 43868, -5, -4),
    Particle(43850, 43873, -4, -4),
    Particle(-43569, 11074, 4, -1),
    Particle(-21714, 22000, 2, -2),
    Particle(54809, 32941, -5, -3),
    Particle(-43590, -32653, 4, 3),
    Particle(-54535, 54800, 5, -5),
    Particle(43863, 22007, -4, -2),
    Particle(43871, -54516, -4, 5),
    Particle(-10810, -10789, 1, 1),
    Particle(-43605, 43868, 4, -4),
    Particle(32942, 22008, -3, -2),
    Particle(-21701, -54524, 2, 5),
    Particle(-21722, -21721, 2, 2),
    Particle(-32666, -43590, 3, 4),
    Particle(32926, -10792, -3, 1),
    Particle(22011, -10787, -2, 1),
    Particle(43846, 32935, -4, -3),
    Particle(22026, -10788, -2, 1),
    Particle(-32682, -54515, 3, 5),
    Particle(-32666, -10792, 3, 1),
    Particle(11071, 22004, -1, -2),
    Particle(-10790, -43585, 1, 4),
    Particle(32934, -43590, -3, 4),
    Particle(-32662, -21723, 3, 2),
    Particle(54790, -10790, -5, 1),
    Particle(11082, 22002, -1, -2),
    Particle(54766, 54801, -5, -5),
    Particle(54794, -43584, -5, 4),
    Particle(-10789, 54805, 1, -5),
    Particle(-43622, -21719, 4, 2),
    Particle(-32682, 54796, 3, -5),
    Particle(43847, 22009, -4, -2),
    Particle(43890, 22007, -4, -2),
    Particle(-21742, 43867, 2, -4),
    Particle(22023, 43869, -2, -4),
    Particle(43858, 43872, -4, -4),
    Particle(-21697, -43583, 2, 4),
    Particle(43871, 32933, -4, -3),
    Particle(21980, 11077, -2, -1),
    Particle(43871, 32935, -4, -3),
    Particle(-32669, -21727, 3, 2),
    Particle(-10774, 11073, 1, -1),
    Particle(-43594, -32655, 4, 3),
    Particle(-21742, 32940, 2, -3),
    Particle(-43595, 11077, 4, -1),
    Particle(-54510, 22005, 5, -2),
    Particle(32912, 32932, -3, -3),
    Particle(-54493, 32932, 5, -3),
    Particle(-54497, -10796, 5, 1),
    Particle(32923, 43868, -3, -4),
    Particle(-10815, -43588, 1, 4),
    Particle(32915, -21728, -3, 2),
    Particle(32931, 54805, -3, -5),
    Particle(32906, 22001, -3, -2),
    Particle(21986, -10796, -2, 1),
    Particle(-54526, -43592, 5, 4),
    Particle(54822, 22000, -5, -2),
    Particle(32926, -43585, -3, 4),
    Particle(32931, -10791, -3, 1),
    Particle(-54496, 43869, 5, -4),
    Particle(22005, 11073, -2, -1),
    Particle(-54525, 54805, 5, -5),
    Particle(-21710, 43867, 2, -4),
    Particle(54814, -43586, -5, 4),
    Particle(22002, 11074, -2, -1),
    Particle(-43606, -10787, 4, 1),
    Particle(32913, -54524, -3, 5),
    Particle(32928, -43583, -3, 4),
    Particle(-10826, 32939, 1, -3),
    Particle(-10769, -10787, 1, 1),
    Particle(-43574, 43870, 4, -4),
    Particle(-32632, -54515, 3, 5),
    Particle(-43613, 32941, 4, -3),
    Particle(11086, -43590, -1, 4),
    Particle(-10773, -54517, 1, 5),
    Particle(-54527, -43587, 5, 4),
    Particle(22014, -21727, -2, 2),
    Particle(32923, 22005, -3, -2),
    Particle(-54493, 43865, 5, -4),
    Particle(-54541, 43866, 5, -4),
    Particle(22019, 32941, -2, -3),
    Particle(11067, -54516, -1, 5),
    Particle(32912, -21723, -3, 2),
    Particle(-10826, 32939, 1, -3),
    Particle(-32637, -32659, 3, 3),
    Particle(-43574, 11075, 4, -1),
    Particle(43834, -54521, -4, 5),
    Particle(-43563, -32660, 4, 3),
    Particle(-43601, -21725, 4, 2),
    Particle(-32647, 54796, 3, -5),
    Particle(-21758, -43592, 2, 4),
    Particle(54766, 32938, -5, -3),
    Particle(32946, -54524, -3, 5),
    Particle(-21734, 11074, 2, -1),
    Particle(43892, -10787, -4, 1),
    Particle(11047, -10790, -1, 1),
    Particle(-10794, -43590, 1, 4),
    Particle(54793, 11077, -5, -1),
    Particle(-32633, 22000, 3, -2),
    Particle(-10770, -54516, 1, 5),
    Particle(-21749, 54802, 2, -5),
    Particle(54782, 11073, -5, -1),
    Particle(-43564, -32651, 4, 3),
    Particle(-54530, -21721, 5, 2),
    Particle(11096, -32655, -1, 3),
    Particle(-54525, 54803, 5, -5),
    Particle(43863, -21720, -4, 2),
    Particle(-32673, -54520, 3, 5),
    Particle(-43562, 11071, 4, -1),
    Particle(32923, 43870, -3, -4),
    Particle(54791, 43873, -5, -4),
    Particle(54815, -10787, -5, 1),
    Particle(-32634, -32653, 3, 3),
    Particle(-54506, -54521, 5, 5),
    Particle(-10821, 54796, 1, -5),
    Particle(-32653, 32941, 3, -3),
    Particle(32950, 43869, -3, -4),
    Particle(43895, 54805, -4, -5),
    Particle(-54506, 54804, 5, -5),
    Particle(-43618, -10788, 4, 1),
    Particle(22013, 11077, -2, -1),
    Particle(-21746, -32651, 2, 3),
    Particle(-43619, -54522, 4, 5),
    Particle(22021, 54801, -2, -5),
    Particle(43858, 54804, -4, -5),
    Particle(43887, 11074, -4, -1),
    Particle(-43602, -43588, 4, 4),
    Particle(43835, 32936, -4, -3),
    Particle(-10823, -54517, 1, 5),
    Particle(43834, -43584, -4, 4),
    Particle(43883, 11068, -4, -1),
    Particle(-43561, -10794, 4, 1),
    Particle(11070, -10788, -1, 1),
    Particle(11098, 22000, -1, -2),
    Particle(-10767, 22000, 1, -2),
    Particle(54787, -54517, -5, 5),
    Particle(22002, 54804, -2, -5),
    Particle(-54543, 22009, 5, -2),
    Particle(43869, -10792, -4, 1),
    Particle(-10797, -43591, 1, 4),
    Particle(54806, 11075, -5, -1),
    Particle(43834, -32652, -4, 3),
    Particle(54766, 54799, -5, -5),
    Particle(54790, -10790, -5, 1),
    Particle(32955, 43871, -3, -4)
]

EXAMPLE = [
    Particle(9, 1, 0, 2),
    Particle(7, 0, -1, 0),
    Particle(3, -2, -1, 1),
    Particle(6, 10, -2, -1),
    Particle(2, -4, 2, 2),
    Particle(-6, 10, 2, -2),
    Particle(1, 8, 1, -1),
    Particle(1, 7, 1, 0),
    Particle(-3, 11, 1, -2),
    Particle(7, 6, -1, -1),
    Particle(-2, 3, 1, 0),
    Particle(-4, 3, 2, 0),
    Particle(10, -3, -1, 1),
    Particle(5, 11, 1, -2),
    Particle(4, 7, 0, -1),
    Particle(8, -2, 0, 1),
    Particle(15, 0, -2, 0),
    Particle(1, 6, 1, 0),
    Particle(8, 9, 0, -1),
    Particle(3, 3, -1, 1),
    Particle(0, 5, 0, -1),
    Particle(-2, 2, 2, 0),
    Particle(5, -2, 1, 2),
    Particle(1, 4, 2, 1),
    Particle(-2, 7, 2, -2),
    Particle(3, 6, -1, -1),
    Particle(5, 0, 1, 0),
    Particle(-6, 0, 2, 0),
    Particle(5, 9, 1, -2),
    Particle(14, 7, -2, 0),
    Particle(-3, 6, 2, -1)
]


def simulate(ps: list, rp: int = 1):
    for t in range(rp):
        for p in ps:
            p.tick()
        draw_particles(ps, t)


def draw_particles(ps: list, t: int, w: int = 100, h: int = 10):
    image = [['.' for i in range(w)] for j in range(h)]
    minX, maxX = min(map(lambda p: p.x, ps)), max(map(lambda p: p.x, ps))
    minY, maxY = min(map(lambda p: p.y, ps)), max(map(lambda p: p.y, ps))
    if maxX - minX < w and maxY - minY < h:
        for p in ps:
            image[p.y - minY][p.x - minX] = '#'
        print('Range: %d / %d, Time: %d' % (maxX - minX, maxY - minY, t))
        print('='*w + '\n' + '\n'.join([''.join(i) for i in image]) + '\n' + '='*w + '\n')


if __name__ == '__main__':
    simulate(POINTS, 20000)
